{"version":3,"file":"ng-plus-signature-pad.js","sources":["@ng-plus/signature-pad/projects/signature-pad/src/lib/signature-pad.component.ts","@ng-plus/signature-pad/projects/signature-pad/src/lib/signature-pad.module.ts"],"names":[],"mappings":"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","sourcesContent":["import {AfterViewInit, Component, ElementRef, EventEmitter, Input, OnInit, Output, ViewChild} from \"@angular/core\";\nimport * as SignaturePad from 'signature_pad/dist/signature_pad';\n\n@Component({\n    selector: 'ng-signature-pad',\n    template: `<div class=\"signature-pad\">\r\n    <canvas\r\n        [width]=\"width\"\r\n        [height]=\"height\"\r\n        #canvas></canvas>\r\n    <div class=\"buttons\">\r\n        <button [class]=\"doneButtonClass\" *ngIf=\"showDoneButton\" (click)=\"emitPointsAndBlob()\">{{ doneButtonText }}</button>\r\n        <button [class]=\"clearButtonClass\" *ngIf=\"showClearButton\" (click)=\"clearPad()\">{{ clearButtonText }}</button>\r\n    </div>\r\n</div>\r\n`,\n    styles: [`.signature-pad canvas{background:#f2f2f2}.signature-pad .btn{margin-right:.25em}`]\n})\nexport class SignaturePadComponent implements OnInit, AfterViewInit {\n\n    private signaturePad: SignaturePad;\n    @ViewChild('canvas', {read: ElementRef}) canvasRef: ElementRef;\n\n    @Input() points: any[] = [];\n    @Output() pointsChange = new EventEmitter<any>();\n\n    @Input() editable = true;\n    @Input() emitOnDragEnd = false;\n\n    @Input() penColor = 'black';\n    @Input() backgroundColor = 'transparent';\n\n    @Input() showDoneButton = true;\n    @Input() doneButtonText = 'Done';\n    @Input() doneButtonClass = 'btn btn-primary';\n    @Input() showClearButton = true;\n    @Input() clearButtonText = 'Clear';\n    @Input() clearButtonClass = 'btn btn-default';\n\n    @Input() format: 'blob' | 'base64' | 'json' = 'blob';\n\n    @Input() height = 150;\n    @Input() width = 600;\n\n    @Output() done = new EventEmitter();\n    @Output() cleared = new EventEmitter();\n\n    @Input() responsive = true;\n\n    constructor() {\n    }\n\n    ngOnInit() {\n    }\n\n    ngAfterViewInit() {\n        // Resize Canvas to full screen:\n        if (this.responsive) {\n            window.addEventListener('resize', () => {\n                this.resizeCanvas();\n            });\n            this.resizeCanvas();\n        }\n        this.initPad();\n    }\n\n    initPad() {\n        this.signaturePad = new SignaturePad(this.canvasRef.nativeElement, {\n            penColor: this.penColor,\n            backgroundColor: this.backgroundColor\n        });\n        this.signaturePad.penColor = this.penColor;\n\n        if (this.editable) {\n            this.signaturePad.on();\n        } else {\n            this.signaturePad.off();\n        }\n\n        this.signaturePad.onEnd = () => {\n            this.emitPoints();\n            if (this.emitOnDragEnd) {\n                this.emitBlob();\n            }\n        };\n\n        this.applyPoints();\n        if (this.emitOnDragEnd) {\n            this.emitBlob();\n        }\n    }\n\n    clearPad() {\n        this.signaturePad.clear();\n        this.cleared.emit();\n        this.emitPoints();\n        if (this.emitOnDragEnd) {\n            this.emitBlob();\n        }\n    }\n\n    applyPoints() {\n\n        if (!this.points || !this.signaturePad) { return; }\n\n        this.signaturePad.clear();\n\n        const multiplier = this.canvasRef.nativeElement.offsetWidth / this.width;\n\n        const points = JSON.parse(JSON.stringify(this.points));\n        points.forEach(group => {\n            group.points.forEach(pt => {\n                pt.x = pt.x * multiplier;\n                pt.y = pt.y * multiplier;\n            });\n        });\n        this.signaturePad.fromData(points);\n    }\n\n    emitPoints() {\n        const multiplier = this.canvasRef.nativeElement.offsetWidth / this.width;\n        const points = JSON.parse(JSON.stringify(this.signaturePad.toData()));\n        points.forEach(group => {\n            group.points.forEach(pt => {\n                pt.x = pt.x / multiplier;\n                pt.y = pt.y / multiplier;\n            });\n        });\n        this.pointsChange.emit(points);\n    }\n\n    emitPointsAndBlob() {\n        this.emitPoints();\n        this.emitBlob();\n    }\n\n    emitBlob() {\n\n        switch (this.format) {\n\n            case 'base64':\n                this.done.emit(this.signaturePad.toDataURL());\n                break;\n\n            case 'json':\n                this.done.emit(this.signaturePad.toData());\n                break;\n\n            default:\n                this.canvasRef.nativeElement.toBlob((blob) => {\n                    this.done.emit(blob);\n                });\n                break;\n        }\n\n    }\n\n\n    resizeCanvas() {\n\n        const canvas = this.canvasRef.nativeElement;\n        if (!canvas) { return; }\n\n        const pad = canvas.closest('.signature-pad') as HTMLElement;\n        if (!pad) { return; }\n\n        const w = pad.offsetWidth;\n        const h = pad.offsetWidth / (this.width / this.height);\n\n        canvas.setAttribute('width', `${w}`);\n        canvas.setAttribute('height', `${h}`);\n\n        this.applyPoints();\n\n    }\n\n}\n","import { NgModule } from '@angular/core';\nimport { SignaturePadComponent } from './signature-pad.component';\nimport { CommonModule } from '@angular/common';\n\n@NgModule({\n  imports: [CommonModule],\n  declarations: [SignaturePadComponent],\n  exports: [SignaturePadComponent]\n})\nexport class SignaturePadModule { }\n"]}